<!DOCTYPE html>
<html>
<head>
    <title>TrailGuard</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="description" content="" />

    <!--calls for the arcgis api's CSS file and JS library-->
    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.25/"></script>

<!--adding the modules for the graphic, graphic and feature layers, API, and map constant needed for a full screen map app-->
<script>
  require([
    "esri/config", 
    "esri/Map", 
    "esri/views/MapView",
    "esri/widgets/BasemapGallery",
    "esri/widgets/Locate",
    "esri/widgets/Search",
    "esri/widgets/Expand",
    "esri/Graphic",  
    "esri/layers/GraphicsLayer", 
    "esri/geometry/Polyline",
    "esri/geometry/Polygon",
    "esri/layers/FeatureLayer",
    "esri/widgets/Editor",
    "esri/widgets/Legend",
    "esri/widgets/LayerList"
  ], function(esriConfig, Map, MapView, BasemapGallery, Locate, Search, Expand, Graphic, GraphicsLayer, Polyline, Polygon, FeatureLayer, Editor, Legend, LayerList) {

    esriConfig.apiKey = "AAPKddba40c16f2c479188ee7654064642bcKj2RV3mAHrsiJS_6TRKUzkim46MXbNeE97z3bQn0zq3zyX67A3i8hBg6lEH0Fxl_"
    const map = new Map({
      basemap: "arcgis-light-gray" //basemap layer
    });

    //view of Wisconsin
    const view = new MapView({
      map:map,
      center: [-89.568209,  44.511926], //longitude, latitude
      zoom: 7, //zoom level
      container: "viewDiv" //Div element
    });

    //define a popup template for the sections feature layer
    const sectionsPopupTemplate = {
      title: "Section or Connecting Route",
      content: [
        {
          type: "text",
          text: "<b>Name: </b> {Segment} <br><b>Type: </b> {Status} <br>"
        },
        {
          type: "fields",
          fieldInfos: [
            {
              fieldName: "length_mi",
              label: "Length",
              format: {
                places: 1,
                digitSeparator: true
              }
            }
          ]
        }
      ]
    };

    //define a popup template for the parking feature layer
    const parkingPopupTemplate = {
      title: "Parking Area",
      content: "<b>Parking Type: </b> {Parking_Type} <br><b>Description: </b> {Description} <br><b>Fee: </b> {Fee} <br><b>Overnight Parking: </b> {Overnight_Park}<br><b>Comment: </b> {Comment} <br>"
    }

    //define a popup template for the camping feature layer
    const campingPopupTemplate = {
      title: "Camping Area",
      content: "<b>Type: </b> {Camp_Type} <br><b># sites: </b> {Num_sites} <br><b>Water: </b> {Water} <br><b>Toilet: </b> {Toilet} <br><b>Showers: </b> {Showers}<br><b>Description: </b> {Description}"
    }

    //define a popuup template for the water feature layer
    const waterPopupTemplate = {
      title: "Potential Water Source",
      content: "<b>Potability: </b> {Potability} <br><b>Reliability: </b> {Reliability} <br><b>Description: </b> {Description}"
    }

    //add the feature layer for IAT sections
    const sections = new FeatureLayer({
      url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/IAT_Segments_CR/FeatureServer",
      title: "IAT Sections or Connecting Routes",

      //add the popup template
      outFields: ["Segment", "length_mi", "Status"],
      popupTemplate: sectionsPopupTemplate
    });
    map.add(sections);

    //add the feature layer for IAT parking lots
    const parking = new FeatureLayer({
      url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/IAT_Parking/FeatureServer",
      title: "Parking Areas",

      //add the popup template
      outFields: ["Parking_Type", "Comment", "Description", "Fee", "Overnight_Park"],
      popupTemplate: parkingPopupTemplate
    });
    map.add(parking);

    //add the feature layer for IAT camping areas
    const camping = new FeatureLayer({
      url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/IAT_Camping1/FeatureServer",
      title: "Camping Areas",
      
      //add the popup template
      outFields: ["Camp_Type", "Num_Sites", "Water", "Toilet", "Showers", "Description"],
      popupTemplate: campingPopupTemplate
    });
    map.add(camping);

    //const for community labels
    const communitiesLabels = {
      symbol: {
        type: "text",
        color: "orange",
        font: {
          size: 12,
          family: "Noto Sans",
          }
      },
      labelPlacement: "above-center",
      labelExpressionInfo: {
        expression: "$feature.Name"
      }
    };

    //const for community icon
    const communityRenderer = {
      type: "simple",
      symbol: {
        type: "picture-marker",
        url: 
      }
    }
    //add the feature layer for IAT communities
    const communities = new FeatureLayer({
      url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/Ice_Age_Trail_Communities_View/FeatureServer",
      title: "Trail Communities",
      type: "simple-marker",
      color: "orange",
      style: "circle",
      labelingInfo: [communitiesLabels]
  });
  map.add(communities);

  //add popup template
  communities.popupTemplate = {
    title: "{Name}"
  }

  //add feature layer for water
  const water = new FeatureLayer ({
    url:"https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/IAT_Potable_Water/FeatureServer",
    title: "Potable Water",
    //add the popup template
    outFields: ["Potability", "Reliability", "Description"],
    popupTemplate: waterPopupTemplate
  });

});
  </script>

<!--css to make a full screen map-->
<style>  
  html, 
  body,  
  #viewDiv {  
    padding: 0;  
    margin: 0;  
    height: 100%;  
    width: 100%;  
 }  
</style> 
   
</head>

<body>

    <!--the div that displays the map-->
    <div id="viewDiv"></div>

</body>
</html>
