<!DOCTYPE html>
<html>
<head>
    <title>TrailGuard</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="description" content="" />

    <!--calls for the arcgis api's CSS file and JS library-->
    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.25/"></script>

<!--adding the modules for the graphic, graphic and feature layers, API, and map constant needed for a full screen map app-->
<script>
  require([
    "esri/config", 
    "esri/Map", 
    "esri/views/MapView",
    "esri/widgets/BasemapGallery",
    "esri/widgets/Locate",
    "esri/widgets/Search",
    "esri/widgets/Expand",
    "esri/Graphic",  
    "esri/layers/GraphicsLayer", 
    "esri/geometry/Polyline",
    "esri/geometry/Polygon",
    "esri/layers/FeatureLayer",
    "esri/widgets/Editor",
    "esri/widgets/Legend",
    "esri/widgets/LayerList"
  ], function(esriConfig, Map, MapView, BasemapGallery, Locate, Search, Expand, Graphic, GraphicsLayer, Polyline, Polygon, FeatureLayer, Editor, Legend, LayerList) {

    esriConfig.apiKey = "AAPKddba40c16f2c479188ee7654064642bcKj2RV3mAHrsiJS_6TRKUzkim46MXbNeE97z3bQn0zq3zyX67A3i8hBg6lEH0Fxl_"
    const map = new Map({
      basemap: "arcgis-light-gray" //basemap layer
    });

    //view of Wisconsin
    const view = new MapView({
      map:map,
      center: [-89.633617,  44.873498], //longitude, latitude
      zoom: 9, //zoom level
      container: "viewDiv" //Div element
    });

    //define a popup template for the sections feature layer
    const sectionsPopupTemplate = {
      title: "Section or Connecting Route",
      content: "<b>Name: </b> {Section} <br><b>Length: </b> {length_mi} mi"
    }

    //define a popup template for the parking feature layer
    const parkingPopupTemplate = {
      title: "Parking Area",
      content: "<b>Parking Type: </b> {Parking_Type} <br><b>Comment: </b> {Comment} <br><b>Description: </b> {Description} <br><b>Fee: </b> {Fee} <br><b>Overnight Parking: </b> {Overnight_Park}"
    }

    //add the feature layer for IAT sections
    const sections = new FeatureLayer({
      url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/ArcGIS/rest/services/IAT_Segments_CR/FeatureServer",
      title: "IAT Sections and Connecting Routes",

      //add the popup template
      outFields: ["Section", "length_mi"],
      popupTemplate: sectionsPopupTemplate
    });
    map.add(sections);

    //add the feature layer for IAT parking lots
    const parking = new FeatureLayer({
      url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/IAT_Parking/FeatureServer",
      title: "Parking Areas",

      //add the popup template
      outFields: ["Parking_Type", "Comment", "Description", "Fee", "Overnight_Park"],
      popupTemplate: parkingPopupTemplate
    });
    map.add(parking);

  });
  </script>
   
</head>

<body>

    <!--the div that displays the map-->
    <div id="viewDiv"></div>

</body>
</html>
