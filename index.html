<!DOCTYPE html>
<html lang="en">
<head>
  <title>TrailGuard</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="description" content="" />
    <link rel="icon" href="TG.png">
    
    <!--calls for the arcgis api's CSS file and JS library-->
    <link rel="stylesheet" href="https://js.arcgis.com/4.25/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.25/"></script>

    <!--CSS to make a full screen map-->
    <style>  
    html,  
    body,  
    #viewDiv {  
      padding: 0;  
      margin: 0;  
      height: 100%;  
      width: 100%;  }  
    </style> 

<!--adding the modules for the graphic, graphic and feature layers, API, and map constant needed for a full screen map app-->
<script>
  require([
    "esri/config", 
    "esri/Map", 
    "esri/views/MapView",
    "esri/widgets/BasemapGallery",
    "esri/widgets/Locate",
    "esri/widgets/Search",
    "esri/widgets/Expand",
    "esri/Graphic",  
    "esri/layers/GraphicsLayer", 
    "esri/geometry/Polyline",
    "esri/layers/FeatureLayer",
    "esri/renderers/SimpleRenderer",
    "esri/symbols/SimpleLineSymbol",
    "esri/Color",
    "esri/widgets/Editor",
    "esri/widgets/Legend",
    "esri/widgets/LayerList"
  ], function(esriConfig, Map, MapView, BasemapGallery, Locate, Search, Expand, Graphic, GraphicsLayer, Polyline, FeatureLayer, SimpleRender, SimpleLineSymbol, Color, Legend, LayerList) {

    esriConfig.apiKey = "AAPKddba40c16f2c479188ee7654064642bcKj2RV3mAHrsiJS_6TRKUzkim46MXbNeE97z3bQn0zq3zyX67A3i8hBg6lEH0Fxl_"
    const map = new Map({
      basemap: "arcgis-light-gray" //basemap layer
    });

    //view of Wisconsin
    const view = new MapView({
      map:map,
      center: [-89.585655,  43.999906], //longitude, latitude
      zoom: 7, //zoom level
      container: "viewDiv" //Div element
    });

 //add sections layer
 const sections = new FeatureLayer({
  url: "https://services.arcgis.com/EeCmkqXss9GYEKIZ/arcgis/rest/services/IAT_Segments_CR/FeatureServer",
  title: "IAT Sections or Connecting Routes",
});
map.add(sections);

    //expand widget for basemap gallery
  const bgExpand = new Expand({
    view: view,
    content: new BasemapGallery({
      view: view,
    })
  });
  view.ui.add(bgExpand, "top-right");

  //create a locate widget instance and add it to the view
  const locate = new Locate({
        view: view
      });
      view.ui.add(locate, "top-left");

      // Create a Search widget instance and add it to the view
      const search = new Search({
        view: view,
        suggestionsEnabled: true,
        maxSuggestions: 3
      });
      
      //expand the search widget
     const searchExpand = new Expand({
        view: view,
        content: search,
        expandIconClass: "esri-icon-search",
        expandTooltip: "Search",
        expanded: false
      })

      //add the search widget to the top left corner of the view
        view.ui.add(searchExpand, {
          position: "top-left",
          index: 2
        });

// Create a LayerList widget
const layerList = new LayerList({
        view: view
      });
    
// Put the LayerList widget into an Expand widget
const layerListExpand = new Expand({
        view: view,
        content: layerList,
        expandIconClass: "esri-icon-layer-list",
        expandTooltip: "Layers"  // Tooltip text for the button
      });

      // Add the Expand widget to the view
      view.ui.add(layerListExpand, "top-right");

       // Create a Legend widget instance and add it to the view
       const legend = new Legend({
  view: view,
  layerInfos: [{
    layer: sections,
    title: "IAT Sections or Connecting Routes"
  }]
});

      const legendExpand = new Expand({
        view: view,
        content: legend,
        expandIconClass: "esri-icon-legend",
        expandTooltip: "Legend",
      });
      view.ui.add(legendExpand, "bottom-left");

     

   });
</script>
</head>
<body>
  <!--the div that displays the map-->
  <div id="viewDiv"></div>
</body>

</html>
 